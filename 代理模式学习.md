#代理模式

## 代理模式的定义
1. 为其他对象提供一种代理，以控制对这个对象的访问。
2. 代理对象起到了一个中介的作用。可以去掉功能服务或者增加额外的服务。
##常见的代理模式
* 远程代理。类似于客户端，服务器这种模式，是远程通信的一个缩影，为不同地理的对象提供局域网代表对象。
* 虚拟代理。根据需要将一个资源消耗很大或者比较复杂的对象进行延迟，真正需要时才进行创建，例子 ：浏览帖子的时候，会有文字和图片， 加入这个图片非常大的话，我们一直在这加载，文字也不能浏览，这样会非常影响我们的体验效果，所以可以采用虚拟代理，用一张虚拟的图片来代替真实的图片，来进行显示，当真实的图片加载完成之后呢，再进行显示，这是虚拟代理的一个简单应用。
* 保护代理。就是控制对一个对象的访问权限，比如发帖的功能，普通用户如果没有注册，只要浏览帖子的功能，只要当注册通过之后，才能进行发帖，删除，评论等一些操作，那么这个权限的控制呢，可以通过保护代理可以实现。
* 智能引用代理就是提供对目标对象的一些额外的服务，

##静态代理：
代理和被代理对象在代理之前是确定的。他们都实现相同的接口或者继承相同的抽象类。

###什么是聚合？
就是一个类中调用另一个类的对象。例如将一个类的对象传进到另一个类的构造方法的参数中。
###聚合的好处
* 聚合方式优于继承，继承会使代码冗杂，且难于维护。
* 聚合方式代码简洁，易于维护，且灵活性高。

##实现不同类，不同方法的代理
* 所谓动态代理是这样一种class
* 他是在运行时生成的class
* 该class需要实现一组interface
使用动态代理类时，必须实现InvocationHandler接口<br>

------
1. 创建一个实现接口InvocationHandler的类，它必须实现invoke方法
2. 创建被代理的类以及接口
3. 调用Proxy的静态方法，创建一个代理类
---newProxyInstance（ClassLoader loader，Class[]interfaces,InvocationHandler h）
4. 通过代理调用方法

##JDK和CGLIB动态代理的区别
* JDK的动态代理机制只能代理实现了接口的类，而不能实现接口的类就不能实现JDK的动态代理。
* cglib是针对类来实现代理的，他的原理是对指定的目标类生成一个子类，并覆盖其中方法实现增强，但因为采用的是继承，所以不能对final修饰的类进行代理。
